# Check for lint error and auto correct them

name: Build jar messages

on: ['push', 'pull_request']

jobs:
  install_dependencies:
    runs-on: ubuntu-20.04

    steps:
    - name: Checkout Astrobee
      uses: actions/checkout@v2
      with:
        repository: nasa/astrobee
        path: astrobee/

    - name: Build image astrobee/astrobee:msgs-ubuntu16.04
      run: docker build astrobee -f astrobee/scripts/docker/astrobee_msgs.Dockerfile
                                 --build-arg UBUNTU_VERSION=16.04
                                 --build-arg ROS_VERSION=kinetic
                                 --build-arg PYTHON=''
                                 -t astrobee/astrobee:astrobee-msgs-ubuntu16.04

    - name: Build image astrobee/astrobee:latest-msgs-jar-ubuntu16.04
      run: docker build astrobee -f astrobee/scripts/docker/build_msgs_jar.Dockerfile
                              --build-arg UBUNTU_VERSION=16.04
                              --build-arg ROS_VERSION=kinetic
                              --build-arg PYTHON=''
                              --build-arg REPO=astrobee
                              -t astrobee/astrobee:latest-msgs-jar-ubuntu16.04

    - name: Copy jar files
      run: |
        docker cp $(docker create --rm astrobee/astrobee:latest-msgs-jar-ubuntu16.04):/src/msgs/devel/share/maven/ .
        find maven -name *.jar
